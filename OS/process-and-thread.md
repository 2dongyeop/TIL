# 프로세스와 스레드

## 프로세스(process)란?
- **실행 중인 프로그램**으로 디스크로부터 메모리에 적재되어 CPU의 할당을 받은 작업의 단위다.
- 기본적으로 프로세스는 1개 이상의 스레드를 소유한다.
- 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 없으며, 접근을 위해서는 $IPC$ 통신이 필요하다.
- 운영체제로부터 시스템 자원을 할당받는다.
    - CPU 시간
    - 운영되기 위한 주소 공간
    - Code, Data, Stack, Heap의 구조로 되어있는 독립된 메모리 영역
        - Code : 코드 자체를 구성하는 메모리 영역
        - Data : 전역변수, 정적변수, 배열 등
        - Stack : 지역변수, 매개변수, 리턴 값 (임시 메모리 영역)
        - Heap : 동적 할당 시 사용 

<br/>

### 프로세스 제어 블록(Process Control Block, PCB)
- 특정 프로세스에 대한 중요한 정보를 저장 하고 있는 운영체제의 자료구조이다.
- 운영체제는 프로세스를 관리하기 위해 프로세스의 생성과 동시에 고유한 PCB 를 생성 한다.
- 동작 방식
    - 프로세스는 CPU 를 할당받아 작업을 처리하다가도 프로세스 전환이 발생하면 진행하던 작업을 저장하고 CPU 를 반환해야 하는데, 이때 작업의 진행 상황을 모두 PCB 에 저장하게 된다. 
    - 그리고 다시 CPU 를 할당받게 되면 PCB 에 저장되어있던 내용을 불러와 이전에 종료됐던 시점부터 다시 작업을 수행한다.

<br/>

## 스레드(Thread)란?
- **프로세스의 실행 단위**라고 할 수 있으며, 한 프로세스 내에서 동작되는 여러 실행 흐름으로 프로세스 내의 주소 공간이나 자원을 공유할 수 있다.
- 스레드는 프로세스 내의 Code, Data, Heap 영역은 다른 스레드와 공유하고 Stack 영역을 따로 할당받는다.
- 하나의 프로세스를 다수의 실행 단위로 구분하여 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화하여 수행 능력을 향상시키는 것을 **멀티스레딩**이라고 한다.

<br/>

### 스택을 스레드마다 독립적으로 할당하는 이유
- 스택은 함수 호출 시 전달되는 인자, 되돌아갈 주소값 및 함수 내에서 선언하는 변수 등을 저장하기 위해 사용되는 메모리 공간이다.
    - 따라서 스택 메모리 공간이 독립적이라는 것은 독립적인 함수 호출이 가능하다는 것이 된다.
- 이는 독립적인 실행 흐름이 추가되는 것이다. 따라서 스레드의 정의에 따라 $독립적인 실행 흐름을 추가하기 위한 최소 조건$으로 독립된 스택을 할당한다.