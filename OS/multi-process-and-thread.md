# 멀티 프로세스와 멀티 스레드

## 멀티 프로세스(Multi Process)
- 하나의 응용프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 병렬적으로 처리하도록 하는 것.

<br/>

### 멀티 프로세스의 장점
- 뛰어난 안전성
    - 여러 개의 자식 프로세스 중 하나에 문제가 발생하면 그 자식 프로세스만 죽는 것 이상으로 다른 프로세스는 영향을 받지 않는다.

<br/>

### 멀티 프로세스의 단점
- 각각 독립된 메모리 영역을 갖고 있어, 작업량 많을 수록 많은 오버헤드가 발생한다.
    - 프로세스는 각 독립된 메모리 영역을 할당받았기 때문에 공유하는 메모리가 없다. 
    - 따라서 캐시 메모리 초기화 등의 무거운 작업이 진행되고 많은 시간이 소모되는 등의 오버헤드가 발생할 문제가 있다.
- 문맥 교환(Context Switching)으로 인한 성능 저하를 유발한다.
    - 문맥 교환이란?
    - 동작 중인 프로세스가 대기하면서 해당 프로세스의 상태를 보관하고, 대기하고 있던 다음 순번의 프로세스가 동작하면서 이전에 보관했던 프로세스 상태를 복구하는 과정을 말한다.
- 프로세스 간 통신 기법 : IPC
    - 프로세스는 각 독립된 메모리 영역을 할당받았기 때문에 프로세스들 사이에서 변수나 자료구조를 공유할 수 없다. 
    - 따라서 IPC라는 방법을 사용해야 하며, 이는 어렵고 복잡한 통신 방법이다.

<br/>

## 멀티 스레드(Multi Thread)
- 하나의 응용 프로그램을 여러 개의 스레드로 구성하고 각 스레드가 하나의 작업을 처리하도록 하는 것.
    - 웹 서버는 대표적인 멀티 스레드 응용 프로그램이다.

<br/>

### 멀티 스레드의 장점
- 메모리 공간과 시스템 자원 소모가 줄어들게 된다.
- 스레드 간 통신시, 전역 변수의 공간 또는 동적으로 할당된 공간인 Heap 영역을 이용해 데이터를 주고 받으므로 통신 방법이 간단하다.
- 문맥 교환(Context switching) 시, 캐시 메모리를 비울 필요가 없기 때문에 비용이 적고 더 빠르다.
    - 따라서 시스템의 처리량이 향상되고 자원 소모가 줄어들며, 자연스럽게 프로그램의 응답 시간이 단축된다.

<br/>

### 멀티 스레드의 단점
- 동기화 문제
    - 서로 다른 스레드가 Data, Heap 영역 등을 공유하기 때문에 어떤 스레드가 다른 스레드에서 사용중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있다. 
    - 즉, 자원 공유의 문제가 발생한다.
- 하나의 스레드에 문제가 생기면 전체 프로세스가 영향을 받는다.


<br/>

## 마무리
### 멀티 프로세스 대신 멀티 스레드를 사용하는 이유는?
- 프로그램을 여러 개 키는 것보다 하나의 프로그램 안에서 여러 작업을 해결하는 것이 더욱 효율적이기 때문이다.
- 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리할 수 있다.
- 스레드는 프로세스 내의 메모리를 공유하기 때문에 데이터 전달이 간단하므로 IPC에 비해 비용이 적고 더 빠르다. -> 스레드는 프로세스의 Stack 영역을 제외한 모든 메모리를 공유하기 때문이다.
