# 가상 메모리
> 가상 메모리(`virtual memory`)란?
>
>→ 프로세스 전체가 메모리 내에 올라오지 않더라도 실행이 가능하도록 하는 기법이다. 
>
>→ 주요 장점은 하나는 사용자 프로그램이 물리 메로리보다 커져도 된다는 점이다! 

<br/>

<br/>

## 💡 배경 _Background

> 실행 중인 코드는 반드시 물리 메모리에 있어야 한다는 것은 일견 필요하고 타당한 요구 조건으로 보이지만, 프로그램의 크기를 물리 메모리의 크기로 제한한다는 점 때문에 마냥 좋은 요구 조건은 아니다.
> 

<br/>

<br/>

> 실제 프로그램을 살펴보면 많은 경우에 프로그램 전체가 한꺼번에 메모리에 늘 올라와 있어야 한다는 건 아님을 쉽게 발견할 수 있다.
> 
- 프로그램에 잘 발생하지 않는 오류 상황을 처리하는 코드가 종종 존재한다.
    - 이런 오류들은 실질적으론 거의 발생하지 않는다.
- 배열, 리스트, 테이블 등은 필요 이상으로 많은 공간을 점유할 수도 있다.
- 프로그램 내의 어떤 옵션이나 기능들은 거의 사용되지 않는다.

<br/>

<br/>

> 만일 프로그램을 일부분만 메모리에 올려놓고 실행할 경우의 얻는 이점
> 
- 프로그램은 물리 메모리 크기에 의해 더는 제약받지 않게 된다.
    - → 사용자들은 매우 큰 ***가상*** 주소 공간을 가정하고 프로그램을 만들 수 있다.
- 각 프로그램이 더 작은 메모리를 차지하므로 더 많은 프로그램을 동시에 수행할 수 있게 된다.
- 프로그램을 메모리에 올리고 스왑하는데 필요한 I/O 회수가 줄어들기 때문에 프로그램 실행이 빠르다.

<br/>

<br/>

<img src="https://github.com/2dongyeop/TIL/blob/main/OS/image/10-background1.png" width = 500/>


> **가상 메모리**는 실제의 물리 메모리 개념과 개발자의 논리 메모리 개념을 분리한 것이다.
> 
- 이로써 작은 메모리를 가지고도 얼만든지 큰 가상 주소 공간을 프로그래머에게 제공할 수 있다는 점이다.

<br/>

<br/>

<img src="https://github.com/2dongyeop/TIL/blob/main/OS/image/10-background2.png" width = 500/>

> 한 프로세스의 **가상 주소 공간**은 그 프로세스가 메모리에 저장되는 논리적인 모습(view)을 말한다.
> 
- 일반적으로 위 그림과 같이 특정 논리 주소에서 시작하여 연속적인 공간을 차지한다.
    - 힙과 스택 사이의 공백도 가상 주소 공간의 일부이다. (**성긴 주소 공간**)

<br/>

<br/>

> 가상 메모리는 페이지 공유를 통해 프로세스들에게 (파일 또는 메모리) 공유를 제공한다.
> 
- 표준 C 라이브러리와 같은 시스템 라이브러리가 여러 프로세스들에 공유되는 것이 예시이다.
- 마찬가지로 프로세스들이 메모리를 공유할 수 있다! → 아래 사진 참고
    
    <img src="https://github.com/2dongyeop/TIL/blob/main/OS/image/10-background3.png" width = 500/>


<br/>

<br/>
