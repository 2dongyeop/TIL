# 정규화

### 함수 종속(FD; Functional Dependency)
- 정규화 이론의 핵심으로, 결정자와 종속자를 나타내는 관계이다.

<br/>

```
X가 Y를 함수적으로 결정한다.
```
- 릴레이션 내의 모든 투플에서 하나의 X 값에 대한 Y 값이 항상 하나이다.
- X와 Y는 하나의 릴레이션을 구성하는 속성들의 부분 집합.
- “Y가 X에 함수적으로 종속되어 있다”와 같은 의미이다.
- X → Y로 표현(X는 결정자, Y는 종속자).

<br/>

> 함수 종속 관계 판단 시 유의 사항
> - 속성 자체의 특성과 의미를 기반으로 함수 종속성을 판단해야 한다.
> - 속성 값은 계속 변할 수 있으므로 현재 릴레이션에 포함된 속성 값만으로 판단하면 안된다.
> - 일반적으로 기본키와 후보키는 릴레이션의 다른 모든 속성들을 함수적으로 결정한다.
> - 기본키나 후보키가 아니어도 다른 속성 값을 유일하게 결정하는 속성은 함수 종속 관계에서 결정자가 될 수 있다.

<br/>

#### 🔥 완전 함수 종속(FFD; Full Functional Dependency)
- 릴레이션에서 속성 집합 Y가 속성 집합 X에 함수적으로 종속되어 있지만,
속성 집합 X의 전체가 아닌 일부분에는 종속되지 않음을 의미한다.
- 일반적으로 함수 종속은 완전 함수 종속을 의미한다.
- 당첨여부는 { 고객아이디, 이벤트번호 }에 완전 함수 종속된다.

<br/>

#### 🔥 부분 함수 종속(PFD; Partial Functional Dependency)
- 릴레이션에서 속성 집합 Y가 속성 집합 X의 전체가 아닌 일부분에도 함수적으로 종속됨을 의미한다.
- 고객이름은 { 고객아이디, 이벤트번호 }에 부분 함수 종속된다.


<br/>

<br/>

### 정규화(normalization)
- 함수 종속성을 이용해 릴레이션을 연관성이 있는 속성들로만 구성되도록 분해해서, 이상 현상이 발생하지 않는 올바른 릴레이션으로 만들어 가는 과정
- 기본 목표 : 관련이 없는 함수 종속성은 별개의 릴레이션으로 표현한다

<br/>

> 주의 사항
> - 정규화를 통해 릴레이션은 무손실 분해(nonloss decomposition)되어야 한다.
> - 릴레이션이 의미상 동등한 릴레이션들로 분해되어야 하고, 분해로 인한 정보 손실이 발생하지 않아야 한다.
> - 분해된 릴레이션들을 자연 조인하면 분해 전의 릴레이션으로 복원 가능해야 한다.

<br/>

<br/>

### 정규형(NF; Normal Form)
- 릴레이션이 정규화된 정도로, 각 정규형마다 제약조건이 존재한다.
- 정규형의 차수가 높아질수록 요구되는 제약조건이 많아지고 엄격해진다.
- 릴레이션의 특성을 고려해서 적합한 정규형을 선택해야 한다.

<br/>

#### 🔥 제1 정규형 (1NF)
- 릴레이션에 속한 모든 속성의 도메인이 원자값으로만 구성되어 있으면 만족된다.

<br/>

#### 🔥 제2 정규형 (2NF)
- 릴레이션이 제1 정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속되면 제2 정규형에 속한다.
- 이행적 함수 종속(trasitive FD)이란?
    - 릴레이션으로 구성하는 3개의 속성 집합 X, Y, Z가 있다고 가정.
    - X → Y와 Y → Z가 존재하면, 논리적으로 X → Z가 성립된다.
    - 이를 Z가 X에 이행적으로 함수 종속되었다고 한다.


<br/>

#### 🔥 제3 정규형 (3NF)
- 릴레이션이 제2 정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 이행적 함수 종속이 되지 않으면 제3 정규형에 속한다.
- 모든 속성이 기본키에 이행적 함수 종속이 되지 않도록 분해한다.


<br/>

#### 🔥 보이스/코드 정규형 (BCNF)
- 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키이면 보이스/코드 정규형에 속한다.
- 하나의 릴레이션에 여러 개의 후보키가 존재하는 경우, 제 3정규형까지 모두 만족해도 이상 현상이 발생할 수 있다.
- 강한 제3 정규형이라고도 불린다.

<br/>

#### 🔥 제4 정규형 (4NF)
- 릴레이션이 보이스/코드 정규형을 만족하면서, 함수 종속이 아닌 다치 종속(MVD; Multi Valued Dependency)을 제거하면 제 4 정규형에 속한다.

<br/>

#### 🔥 제5 정규형 (5NF)
- 릴레이션이 제 4 정규형을 만족하면서,
후보키를 통하지 않는 조인 종속 (JD; Join Dependency)을 제거하면 제 5 정규형에 속한다.

<br/>

> 정규화 시 주의 사항
> - 모든 릴레이션이 제 5 정규형에 속해야만 바람직한 것은 아니다.
> - 일반적으로 제 3 정규형이나 보이스/코드 정규형에 속하도록 릴레이션을 분해하여 데이터 중복을 줄이고
이상 현상을 해결하는 경우가 많다.